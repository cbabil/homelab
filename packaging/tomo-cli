#!/bin/bash
# Tomo CLI Wrapper
# This script provides a convenient way to run CLI commands
# Installed to: /usr/bin/tomo

set -e

# Configuration
INSTALL_DIR="/opt/tomo"
VENV_DIR="${INSTALL_DIR}/venv"
CLI_SCRIPT="${INSTALL_DIR}/cli.py"
DATA_DIR="/var/lib/tomo"
CONFIG_FILE="/etc/tomo/config.yaml"

# Check if virtual environment exists
if [ ! -d "${VENV_DIR}" ]; then
    echo "Error: Virtual environment not found at ${VENV_DIR}"
    echo "Please reinstall tomo package"
    exit 1
fi

# Check if CLI script exists
if [ ! -f "${CLI_SCRIPT}" ]; then
    echo "Error: CLI script not found at ${CLI_SCRIPT}"
    echo "Please reinstall tomo package"
    exit 1
fi

# Export environment variables
export PYTHONPATH="${INSTALL_DIR}"
export DATA_DIRECTORY="${DATA_DIR}"
export CONFIG_FILE="${CONFIG_FILE}"

# Run CLI with all arguments
exec "${VENV_DIR}/bin/python" "${CLI_SCRIPT}" "$@"
